{% extends 'menu.html' %}

{#
Copyright Hugh Perkins 2009
hughperkins@gmail.com http://manageddreams.com

This program is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
more details.

You should have received a copy of the GNU General Public License along
with this program in the file licence.txt; if not, write to the
Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-
1307 USA
You can find the licence also on the web at:
http://www.opensource.org/licenses/gpl-license.php
#}

{% import 'formhelper.html' as formhelper %}
{% block title %}View League '{{leaguename|e}}'{% endblock title %}
{% block content %}

<h2>{{c.league.league_name|e}}</h2>

<table cellpadding="3" class="table">
<tr><td class='tablehead'>Map</td><td>{% for map_name in c.map_names %} {{map_name[0]|e}} {% endfor %}</td></tr>
<tr><td class='tablehead'>Mod</td><td>{{c.mod_name|e}}</td></tr>
{% for option in c.league.options %}
    {{option|e}} 
{% endfor %}
&nbsp;</td></tr>
</table>

<h2>Standings</h2>

<table cellpadding="3" class="table table-striped">
<tr>
    <td>AIs</td>
    <td>Wins</td>
    <td>Losses</td>
    <td>Draws</td>
    <td>Timeouts</td>
    <td>Crashes</td>
    <td>Scheduled</td>
    <td>Total Games</td>
    <td>Score</td>
</tr>
    {% for aistat in c.aistats %}
    <tr>
        {% if c.spoil != 0 %}
        <th> {% if loop.index == 1 %} <span class="glyphicon glyphicon-star" aria-hidden="true"></span>  {% endif %} {{aistat.name|e}} {{aistat.version|e}}</th>
        <td>{{aistat.wins}}</td>
        <td>{{aistat.losses}}</td>
        <td {% if aistat.draws > 0 %} class="warning" {% endif %}>{{aistat.draws}}</td>
        <td {% if aistat.timeouts > 0 %} class="warning" {% endif %}>{{aistat.timeouts}}</td>
        <td {% if aistat.crashes > 0 %} class="danger" {% endif %}>{{aistat.crashes}}</td>
        <td>{{aistat.scheduled}}</td>
        <td>{{aistat.games}}</td>
        <td>{{aistat.score}}</td>
        {% else %}
        <th>{{aistat.name|e}} {{aistat.version|e}}</th>
        <td>?</td>
        <td>?</td>
        <td>?</td>
        <td>?</td>
        <td>?</td>
        <td>{{aistat.scheduled}}</td>
        <td>{{aistat.games}}</td>
        <td>?</td>
        {% endif %}
    </tr>
    {% endfor %}
</table>
<a href="{{ h.url(controller='matches', action='results')}}?league={{c.league.league_id}}&spoil={{c.spoil}}" class="btn btn-default">View Results</a>
<a href="{{ h.url(controller='matches', action='requests')}}?league={{c.league.league_id}}" class="btn btn-default">View Requests</a>
<a href="{{ h.url(controller='league', action='view', id=c.league.league_id)}}?spoil={{1-c.spoil}}" class="btn btn-default">Toggle spoiling</a>

{% endblock %}

